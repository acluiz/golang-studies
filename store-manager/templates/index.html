{{define "Index"}}
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loja</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light mb-4">
      <a class="navbar-brand" href="/">Loja</a>
    </nav>

    <div class="container">
      <table class="table border table-striped table-hover mb-0">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Preço</th>
            <th>Quantidade</th>
          </tr>
        </thead>
        <tbody>
          {{range .}}
          <tr>
            <td>{{.Name}}</td>
            <td>{{.Description}}</td>
            <td>{{.Price}}</td>
            <td>{{.Quantity}}</td>
            <td>
              <button class="btn btn-danger" onclick="onDelete('{{.Id}}')">
                Deletar
              </button>
            </td>
          </tr>
          {{end}}
        </tbody>
      </table>
    </div>
    <div class="container mt-4">
      <a class="btn btn-info" href="/novo-produto">Adicionar produto</a>
    </div>
  </body>

  <script>
    function onDelete(id) {
      let resp = confirm("Tem certeza que deseja deletar esse produto?");

      if (resp) {
        window.location = `/delete?id=${id}`;
      }
    }
  </script>
</html>
{{end}}
